{"ast":null,"code":"var _jsxFileName = \"D:\\\\CODE\\\\covalen-app\\\\src\\\\components\\\\DashboardMaison_Optimized.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useMemo } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\n\n// Types de drag & drop\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  TASK: 'task'\n};\n\n// Composant Task draggable optimisé\nconst TaskItem = ({\n  task,\n  category,\n  index,\n  onTaskClick\n}) => {\n  _s();\n  var _task$fields, _task$fields$find;\n  const [{\n    isDragging\n  }, dragRef] = useDrag(() => ({\n    type: ItemTypes.TASK,\n    item: {\n      type: ItemTypes.TASK,\n      task,\n      category,\n      index,\n      sourceCategory: category,\n      sourceIndex: index\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }), [task, category, index]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: dragRef,\n    className: `task-item clickable draggable enhanced-drag compact ${isDragging ? 'dragging' : ''}`,\n    onClick: () => !isDragging && onTaskClick(task),\n    title: \"\\uD83D\\uDDB1\\uFE0F Glissez pour r\\xE9organiser dans la m\\xEAme cat\\xE9gorie\",\n    style: {\n      opacity: isDragging ? 0.6 : 1\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-content-compact\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"drag-handle enhanced-handle compact-handle\",\n        title: \"R\\xE9organiser\",\n        children: \"\\u22EE\\u22EE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-number\",\n          children: (_task$fields = task.fields) === null || _task$fields === void 0 ? void 0 : (_task$fields$find = _task$fields.find(f => f.key === 'modelNumber')) === null || _task$fields$find === void 0 ? void 0 : _task$fields$find.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-name-compact\",\n          children: task.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 9\n  }, this);\n};\n\n// Zone de drop optimisée\n_s(TaskItem, \"PitWq9MEidg2fcoeQ58axdvz0w4=\", false, function () {\n  return [useDrag];\n});\n_c = TaskItem;\nconst TaskDropZone = ({\n  category,\n  index,\n  onReorderTask,\n  isLast = false\n}) => {\n  _s2();\n  const [{\n    isOver,\n    canDrop\n  }, dropRef] = useDrop(() => ({\n    accept: ItemTypes.TASK,\n    drop: item => {\n      if (item.sourceCategory === category) {\n        let targetIndex = index;\n        if (item.sourceIndex < index) {\n          targetIndex = index - 1;\n        }\n        if (item.sourceIndex !== targetIndex && targetIndex >= 0) {\n          onReorderTask(category, item.sourceIndex, targetIndex);\n        }\n      }\n      return {\n        dropEffect: 'move'\n      };\n    },\n    canDrop: item => item.sourceCategory === category,\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  }), [category, index, onReorderTask]);\n  const showDropIndicator = isOver && canDrop;\n  const isDragOverDifferentCategory = isOver && !canDrop;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: dropRef,\n    className: `task-drop-zone-vertical ${showDropIndicator ? 'drag-over' : ''} ${isDragOverDifferentCategory ? 'blocked-drop' : ''} ${isLast ? 'final' : ''}`,\n    children: [showDropIndicator && !isLast && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drop-indicator\",\n      children: \"\\u25BC Ins\\xE9rer ici \\u25BC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this), showDropIndicator && isLast && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drop-indicator final\",\n      children: \"\\u2B07\\uFE0F Ajouter \\xE0 la fin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this), isDragOverDifferentCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drop-indicator blocked\",\n      children: \"\\u274C Drop inter-cat\\xE9gories bloqu\\xE9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n\n// Zone de drop pour catégories vides\n_s2(TaskDropZone, \"FzF8SlU/jX+/Arn9Cg8jR1w1M84=\", false, function () {\n  return [useDrop];\n});\n_c2 = TaskDropZone;\nconst EmptyDropZone = ({\n  category\n}) => {\n  _s3();\n  const [{\n    isOver,\n    canDrop\n  }, dropRef] = useDrop(() => ({\n    accept: ItemTypes.TASK,\n    canDrop: item => item.sourceCategory === category,\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  }), [category]);\n  const showDropIndicator = isOver && canDrop;\n  const isDragOverDifferentCategory = isOver && !canDrop;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: dropRef,\n    className: `empty-category-drop-zone grid-full-width ${showDropIndicator ? 'drag-over' : ''} ${isDragOverDifferentCategory ? 'blocked-drop' : ''}`,\n    children: [\"\\uD83D\\uDCC2 Aucune t\\xE2che dans \\\"\", category, \"\\\"\", showDropIndicator && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-drop-indicator\",\n      children: \"\\u2728 Zone de r\\xE9organisation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }, this), isDragOverDifferentCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-drop-indicator blocked\",\n      children: \"\\u274C Drop inter-cat\\xE9gories non autoris\\xE9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n};\n\n// Composant de colonne de catégorie\n_s3(EmptyDropZone, \"FzF8SlU/jX+/Arn9Cg8jR1w1M84=\", false, function () {\n  return [useDrop];\n});\n_c3 = EmptyDropZone;\nconst CategoryColumn = ({\n  category,\n  tasks,\n  isOpen,\n  isAdminMode,\n  onToggleCategory,\n  onTaskClick,\n  onReorderTask,\n  searchTerm\n}) => {\n  _s4();\n  // Filtrer les tâches localement\n  const filteredTasks = useMemo(() => {\n    if (!searchTerm) return tasks;\n    const searchLower = searchTerm.toLowerCase();\n    return tasks.filter(task => {\n      var _task$fields2, _task$fields2$find;\n      const modelNumber = ((_task$fields2 = task.fields) === null || _task$fields2 === void 0 ? void 0 : (_task$fields2$find = _task$fields2.find(f => f.key === 'modelNumber')) === null || _task$fields2$find === void 0 ? void 0 : _task$fields2$find.value) || '';\n      return task.name.toLowerCase().includes(searchLower) || modelNumber.toLowerCase().includes(searchLower) || category.toLowerCase().includes(searchLower);\n    });\n  }, [tasks, searchTerm, category]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `category-header ${isAdminMode ? 'admin-mode' : ''}`,\n      onClick: e => onToggleCategory(category, e),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"category-toggle\",\n          children: isOpen ? '▼' : '▶'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"category-name\",\n          children: category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), isAdminMode && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-count\",\n          children: [\"(\", filteredTasks.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"category-goto\",\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tasks-grid\",\n      children: filteredTasks.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyDropZone, {\n        category: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [filteredTasks.map((task, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-grid-item\",\n          children: [/*#__PURE__*/_jsxDEV(TaskDropZone, {\n            category: category,\n            index: index,\n            onReorderTask: onReorderTask\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(TaskItem, {\n            task: task,\n            category: category,\n            index: index,\n            onTaskClick: onTaskClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 37\n          }, this)]\n        }, `task-wrapper-${task.tabName}-${task.id}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 33\n        }, this)), /*#__PURE__*/_jsxDEV(TaskDropZone, {\n          category: category,\n          index: filteredTasks.length,\n          onReorderTask: onReorderTask,\n          isLast: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 9\n  }, this);\n};\n_s4(CategoryColumn, \"d4lXkW2b761OpCfQlMVdi7BAGcM=\");\n_c4 = CategoryColumn;\nconst DashboardMaison = ({\n  appData,\n  onTabChange,\n  onTaskSelect,\n  onAdminPanel,\n  isAdminMode,\n  onMoveTask,\n  onReorderCategories,\n  onReorderTasksInCategory\n}) => {\n  _s5();\n  const [categoryStates, setCategoryStates] = useState({});\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Données organisées par catégorie - calcul optimisé\n  const categoriesData = useMemo(() => {\n    const categories = new Map();\n    Object.keys(appData).forEach(tabName => {\n      if (tabName !== 'Maison' && tabName !== 'Admin') {\n        const tasks = appData[tabName] || [];\n        tasks.forEach(task => {\n          const categoryName = task.category || 'Autres';\n          if (!categories.has(categoryName)) {\n            categories.set(categoryName, {\n              name: categoryName,\n              tasks: []\n            });\n          }\n          categories.get(categoryName).tasks.push({\n            ...task,\n            tabName\n          });\n        });\n      }\n    });\n\n    // Retourner un array trié pour un ordre stable\n    return Array.from(categories.values()).sort((a, b) => a.name.localeCompare(b.name));\n  }, [appData]);\n\n  // Filtrage des catégories\n  const filteredCategories = useMemo(() => {\n    if (!searchTerm) return categoriesData;\n    const searchLower = searchTerm.toLowerCase();\n    return categoriesData.filter(category => {\n      const categoryMatches = category.name.toLowerCase().includes(searchLower);\n      const hasMatchingTasks = category.tasks.some(task => {\n        var _task$fields3, _task$fields3$find;\n        const modelNumber = ((_task$fields3 = task.fields) === null || _task$fields3 === void 0 ? void 0 : (_task$fields3$find = _task$fields3.find(f => f.key === 'modelNumber')) === null || _task$fields3$find === void 0 ? void 0 : _task$fields3$find.value) || '';\n        return task.name.toLowerCase().includes(searchLower) || modelNumber.toLowerCase().includes(searchLower);\n      });\n      return categoryMatches || hasMatchingTasks;\n    });\n  }, [categoriesData, searchTerm]);\n  const handleToggleCategory = (categoryName, event) => {\n    event.stopPropagation();\n    setCategoryStates(prev => ({\n      ...prev,\n      [categoryName]: !prev[categoryName]\n    }));\n  };\n  const handleTaskClick = task => {\n    onTabChange(task.tabName);\n    onTaskSelect(task);\n  };\n  const getTotalTaskCount = () => {\n    return filteredCategories.reduce((total, category) => total + category.tasks.length, 0);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"dashboard-title\",\n        children: \"Covalen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"welcome-message\",\n      children: \"Bienvenue sur votre tableau de bord centralis\\xE9.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }, this), isAdminMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-dashboard-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-banner\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"admin-banner-text\",\n          children: \"Mode Admin Actif sur le Dashboard.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-manage-btn\",\n          onClick: onAdminPanel,\n          children: \"G\\xE9rer les Onglets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overview-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"overview-title\",\n        children: \"Vue d'overview des T\\xE2ches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"search-icon\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Rechercher une t\\xE2che, cat\\xE9gorie ou num\\xE9ro...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"search-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 25\n          }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"search-clear\",\n            onClick: () => setSearchTerm(''),\n            title: \"Effacer la recherche\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-hints\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"search-hint\",\n            children: \"\\uD83D\\uDCA1 Raccourci: Ctrl+/ pour rechercher\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 21\n        }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-results-info\",\n          children: filteredCategories.length === 0 ? `Aucun résultat pour \"${searchTerm}\"` : `${getTotalTaskCount()} tâche(s) trouvée(s) dans ${filteredCategories.length} catégorie(s)`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"categories-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tasks-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tasks-label\",\n            children: \"T\\xE2ches\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }, this), filteredCategories.map(category => {\n          var _categoryStates$categ;\n          return /*#__PURE__*/_jsxDEV(CategoryColumn, {\n            category: category.name,\n            tasks: category.tasks,\n            isOpen: (_categoryStates$categ = categoryStates[category.name]) !== null && _categoryStates$categ !== void 0 ? _categoryStates$categ : true,\n            isAdminMode: isAdminMode,\n            onToggleCategory: handleToggleCategory,\n            onTaskClick: handleTaskClick,\n            onReorderTask: onReorderTasksInCategory,\n            searchTerm: searchTerm\n          }, category.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 25\n          }, this);\n        }), filteredCategories.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-results\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Aucune cat\\xE9gorie ne correspond \\xE0 votre recherche.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 9\n  }, this);\n};\n_s5(DashboardMaison, \"2z/e+O9wO2YGMvboOthtWP65jlQ=\");\n_c5 = DashboardMaison;\nexport default DashboardMaison;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"TaskItem\");\n$RefreshReg$(_c2, \"TaskDropZone\");\n$RefreshReg$(_c3, \"EmptyDropZone\");\n$RefreshReg$(_c4, \"CategoryColumn\");\n$RefreshReg$(_c5, \"DashboardMaison\");","map":{"version":3,"names":["React","useState","useMemo","useDrag","useDrop","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","TASK","TaskItem","task","category","index","onTaskClick","_s","_task$fields","_task$fields$find","isDragging","dragRef","type","item","sourceCategory","sourceIndex","collect","monitor","ref","className","onClick","title","style","opacity","children","fileName","_jsxFileName","lineNumber","columnNumber","fields","find","f","key","value","name","_c","TaskDropZone","onReorderTask","isLast","_s2","isOver","canDrop","dropRef","accept","drop","targetIndex","dropEffect","showDropIndicator","isDragOverDifferentCategory","_c2","EmptyDropZone","_s3","_c3","CategoryColumn","tasks","isOpen","isAdminMode","onToggleCategory","searchTerm","_s4","filteredTasks","searchLower","toLowerCase","filter","_task$fields2","_task$fields2$find","modelNumber","includes","e","length","map","tabName","id","_c4","DashboardMaison","appData","onTabChange","onTaskSelect","onAdminPanel","onMoveTask","onReorderCategories","onReorderTasksInCategory","_s5","categoryStates","setCategoryStates","setSearchTerm","categoriesData","categories","Map","Object","keys","forEach","categoryName","has","set","get","push","Array","from","values","sort","a","b","localeCompare","filteredCategories","categoryMatches","hasMatchingTasks","some","_task$fields3","_task$fields3$find","handleToggleCategory","event","stopPropagation","prev","handleTaskClick","getTotalTaskCount","reduce","total","placeholder","onChange","target","_categoryStates$categ","_c5","$RefreshReg$"],"sources":["D:/CODE/covalen-app/src/components/DashboardMaison_Optimized.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\n\n// Types de drag & drop\nconst ItemTypes = {\n    TASK: 'task'\n};\n\n// Composant Task draggable optimisé\nconst TaskItem = ({ task, category, index, onTaskClick }) => {\n    const [{ isDragging }, dragRef] = useDrag(() => ({\n        type: ItemTypes.TASK,\n        item: {\n            type: ItemTypes.TASK,\n            task,\n            category,\n            index,\n            sourceCategory: category,\n            sourceIndex: index\n        },\n        collect: (monitor) => ({\n            isDragging: monitor.isDragging(),\n        }),\n    }), [task, category, index]);\n\n    return (\n        <div\n            ref={dragRef}\n            className={`task-item clickable draggable enhanced-drag compact ${isDragging ? 'dragging' : ''}`}\n            onClick={() => !isDragging && onTaskClick(task)}\n            title=\"🖱️ Glissez pour réorganiser dans la même catégorie\"\n            style={{ opacity: isDragging ? 0.6 : 1 }}\n        >\n            <div className=\"task-content-compact\">\n                <span className=\"drag-handle enhanced-handle compact-handle\" title=\"Réorganiser\">\n                    ⋮⋮\n                </span>\n                <div className=\"task-info\">\n                    <span className=\"task-number\">\n                        {task.fields?.find(f => f.key === 'modelNumber')?.value}\n                    </span>\n                    <span className=\"task-name-compact\">\n                        {task.name}\n                    </span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Zone de drop optimisée\nconst TaskDropZone = ({ category, index, onReorderTask, isLast = false }) => {\n    const [{ isOver, canDrop }, dropRef] = useDrop(() => ({\n        accept: ItemTypes.TASK,\n        drop: (item) => {\n            if (item.sourceCategory === category) {\n                let targetIndex = index;\n                if (item.sourceIndex < index) {\n                    targetIndex = index - 1;\n                }\n                if (item.sourceIndex !== targetIndex && targetIndex >= 0) {\n                    onReorderTask(category, item.sourceIndex, targetIndex);\n                }\n            }\n            return { dropEffect: 'move' };\n        },\n        canDrop: (item) => item.sourceCategory === category,\n        collect: (monitor) => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    }), [category, index, onReorderTask]);\n\n    const showDropIndicator = isOver && canDrop;\n    const isDragOverDifferentCategory = isOver && !canDrop;\n\n    return (\n        <div\n            ref={dropRef}\n            className={`task-drop-zone-vertical ${showDropIndicator ? 'drag-over' : ''} ${isDragOverDifferentCategory ? 'blocked-drop' : ''} ${isLast ? 'final' : ''}`}\n        >\n            {showDropIndicator && !isLast && (\n                <div className=\"drop-indicator\">▼ Insérer ici ▼</div>\n            )}\n            {showDropIndicator && isLast && (\n                <div className=\"drop-indicator final\">⬇️ Ajouter à la fin</div>\n            )}\n            {isDragOverDifferentCategory && (\n                <div className=\"drop-indicator blocked\">❌ Drop inter-catégories bloqué</div>\n            )}\n        </div>\n    );\n};\n\n// Zone de drop pour catégories vides\nconst EmptyDropZone = ({ category }) => {\n    const [{ isOver, canDrop }, dropRef] = useDrop(() => ({\n        accept: ItemTypes.TASK,\n        canDrop: (item) => item.sourceCategory === category,\n        collect: (monitor) => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    }), [category]);\n\n    const showDropIndicator = isOver && canDrop;\n    const isDragOverDifferentCategory = isOver && !canDrop;\n\n    return (\n        <div\n            ref={dropRef}\n            className={`empty-category-drop-zone grid-full-width ${showDropIndicator ? 'drag-over' : ''} ${isDragOverDifferentCategory ? 'blocked-drop' : ''}`}\n        >\n            📂 Aucune tâche dans \"{category}\"\n            {showDropIndicator && (\n                <div className=\"empty-drop-indicator\">✨ Zone de réorganisation</div>\n            )}\n            {isDragOverDifferentCategory && (\n                <div className=\"empty-drop-indicator blocked\">❌ Drop inter-catégories non autorisé</div>\n            )}\n        </div>\n    );\n};\n\n// Composant de colonne de catégorie\nconst CategoryColumn = ({ category, tasks, isOpen, isAdminMode, onToggleCategory, onTaskClick, onReorderTask, searchTerm }) => {\n    // Filtrer les tâches localement\n    const filteredTasks = useMemo(() => {\n        if (!searchTerm) return tasks;\n        \n        const searchLower = searchTerm.toLowerCase();\n        return tasks.filter(task => {\n            const modelNumber = task.fields?.find(f => f.key === 'modelNumber')?.value || '';\n            return (\n                task.name.toLowerCase().includes(searchLower) ||\n                modelNumber.toLowerCase().includes(searchLower) ||\n                category.toLowerCase().includes(searchLower)\n            );\n        });\n    }, [tasks, searchTerm, category]);\n\n    return (\n        <div className=\"category-section\">\n            <div\n                className={`category-header ${isAdminMode ? 'admin-mode' : ''}`}\n                onClick={(e) => onToggleCategory(category, e)}\n            >\n                <div className=\"category-left\">\n                    <span className=\"category-toggle\">\n                        {isOpen ? '▼' : '▶'}\n                    </span>\n                    <span className=\"category-name\">{category}</span>\n                    {isAdminMode && (\n                        <span className=\"task-count\">({filteredTasks.length})</span>\n                    )}\n                </div>\n                <span className=\"category-goto\">→</span>\n            </div>\n\n            {isOpen && (\n                <div className=\"tasks-grid\">\n                    {filteredTasks.length === 0 ? (\n                        <EmptyDropZone category={category} />\n                    ) : (\n                        <>\n                            {filteredTasks.map((task, index) => (\n                                <div key={`task-wrapper-${task.tabName}-${task.id}`} className=\"task-grid-item\">\n                                    <TaskDropZone\n                                        category={category}\n                                        index={index}\n                                        onReorderTask={onReorderTask}\n                                    />\n                                    <TaskItem\n                                        task={task}\n                                        category={category}\n                                        index={index}\n                                        onTaskClick={onTaskClick}\n                                    />\n                                </div>\n                            ))}\n                            <TaskDropZone\n                                category={category}\n                                index={filteredTasks.length}\n                                onReorderTask={onReorderTask}\n                                isLast={true}\n                            />\n                        </>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst DashboardMaison = ({ \n    appData, \n    onTabChange, \n    onTaskSelect, \n    onAdminPanel, \n    isAdminMode, \n    onMoveTask, \n    onReorderCategories, \n    onReorderTasksInCategory \n}) => {\n    const [categoryStates, setCategoryStates] = useState({});\n    const [searchTerm, setSearchTerm] = useState('');\n\n    // Données organisées par catégorie - calcul optimisé\n    const categoriesData = useMemo(() => {\n        const categories = new Map();\n\n        Object.keys(appData).forEach(tabName => {\n            if (tabName !== 'Maison' && tabName !== 'Admin') {\n                const tasks = appData[tabName] || [];\n                tasks.forEach(task => {\n                    const categoryName = task.category || 'Autres';\n                    \n                    if (!categories.has(categoryName)) {\n                        categories.set(categoryName, {\n                            name: categoryName,\n                            tasks: []\n                        });\n                    }\n                    \n                    categories.get(categoryName).tasks.push({\n                        ...task,\n                        tabName\n                    });\n                });\n            }\n        });\n\n        // Retourner un array trié pour un ordre stable\n        return Array.from(categories.values())\n            .sort((a, b) => a.name.localeCompare(b.name));\n    }, [appData]);\n\n    // Filtrage des catégories\n    const filteredCategories = useMemo(() => {\n        if (!searchTerm) return categoriesData;\n\n        const searchLower = searchTerm.toLowerCase();\n        \n        return categoriesData.filter(category => {\n            const categoryMatches = category.name.toLowerCase().includes(searchLower);\n            const hasMatchingTasks = category.tasks.some(task => {\n                const modelNumber = task.fields?.find(f => f.key === 'modelNumber')?.value || '';\n                return (\n                    task.name.toLowerCase().includes(searchLower) ||\n                    modelNumber.toLowerCase().includes(searchLower)\n                );\n            });\n            \n            return categoryMatches || hasMatchingTasks;\n        });\n    }, [categoriesData, searchTerm]);\n\n    const handleToggleCategory = (categoryName, event) => {\n        event.stopPropagation();\n        setCategoryStates(prev => ({\n            ...prev,\n            [categoryName]: !prev[categoryName]\n        }));\n    };\n\n    const handleTaskClick = (task) => {\n        onTabChange(task.tabName);\n        onTaskSelect(task);\n    };\n\n    const getTotalTaskCount = () => {\n        return filteredCategories.reduce((total, category) => total + category.tasks.length, 0);\n    };\n\n    return (\n        <div className=\"dashboard-container\">\n            <div className=\"dashboard-header\">\n                <h1 className=\"dashboard-title\">Covalen</h1>\n            </div>\n\n            <p className=\"welcome-message\">\n                Bienvenue sur votre tableau de bord centralisé.\n            </p>\n\n            {isAdminMode && (\n                <div className=\"admin-dashboard-section\">\n                    <div className=\"admin-banner\">\n                        <p className=\"admin-banner-text\">Mode Admin Actif sur le Dashboard.</p>\n                        <button className=\"admin-manage-btn\" onClick={onAdminPanel}>\n                            Gérer les Onglets\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            <div className=\"overview-section\">\n                <h2 className=\"overview-title\">Vue d'overview des Tâches</h2>\n\n                <div className=\"search-container\">\n                    <div className=\"search-bar\">\n                        <span className=\"search-icon\">🔍</span>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Rechercher une tâche, catégorie ou numéro...\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"search-input\"\n                        />\n                        {searchTerm && (\n                            <button\n                                className=\"search-clear\"\n                                onClick={() => setSearchTerm('')}\n                                title=\"Effacer la recherche\"\n                            >\n                                ✕\n                            </button>\n                        )}\n                    </div>\n                    <div className=\"search-hints\">\n                        <span className=\"search-hint\">💡 Raccourci: Ctrl+/ pour rechercher</span>\n                    </div>\n                    {searchTerm && (\n                        <div className=\"search-results-info\">\n                            {filteredCategories.length === 0\n                                ? `Aucun résultat pour \"${searchTerm}\"`\n                                : `${getTotalTaskCount()} tâche(s) trouvée(s) dans ${filteredCategories.length} catégorie(s)`\n                            }\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"categories-container\">\n                    <div className=\"tasks-header\">\n                        <span className=\"tasks-label\">Tâches</span>\n                    </div>\n\n                    {filteredCategories.map(category => (\n                        <CategoryColumn\n                            key={category.name}\n                            category={category.name}\n                            tasks={category.tasks}\n                            isOpen={categoryStates[category.name] ?? true}\n                            isAdminMode={isAdminMode}\n                            onToggleCategory={handleToggleCategory}\n                            onTaskClick={handleTaskClick}\n                            onReorderTask={onReorderTasksInCategory}\n                            searchTerm={searchTerm}\n                        />\n                    ))}\n\n                    {filteredCategories.length === 0 && (\n                        <div className=\"no-results\">\n                            <p>Aucune catégorie ne correspond à votre recherche.</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default DashboardMaison;\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AAChD,SAASC,OAAO,EAAEC,OAAO,QAAQ,WAAW;;AAE5C;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,SAAS,GAAG;EACdC,IAAI,EAAE;AACV,CAAC;;AAED;AACA,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,IAAI;EAAEC,QAAQ;EAAEC,KAAK;EAAEC;AAAY,CAAC,KAAK;EAAAC,EAAA;EAAA,IAAAC,YAAA,EAAAC,iBAAA;EACzD,MAAM,CAAC;IAAEC;EAAW,CAAC,EAAEC,OAAO,CAAC,GAAGjB,OAAO,CAAC,OAAO;IAC7CkB,IAAI,EAAEZ,SAAS,CAACC,IAAI;IACpBY,IAAI,EAAE;MACFD,IAAI,EAAEZ,SAAS,CAACC,IAAI;MACpBE,IAAI;MACJC,QAAQ;MACRC,KAAK;MACLS,cAAc,EAAEV,QAAQ;MACxBW,WAAW,EAAEV;IACjB,CAAC;IACDW,OAAO,EAAGC,OAAO,KAAM;MACnBP,UAAU,EAAEO,OAAO,CAACP,UAAU,CAAC;IACnC,CAAC;EACL,CAAC,CAAC,EAAE,CAACP,IAAI,EAAEC,QAAQ,EAAEC,KAAK,CAAC,CAAC;EAE5B,oBACIR,OAAA;IACIqB,GAAG,EAAEP,OAAQ;IACbQ,SAAS,EAAE,uDAAuDT,UAAU,GAAG,UAAU,GAAG,EAAE,EAAG;IACjGU,OAAO,EAAEA,CAAA,KAAM,CAACV,UAAU,IAAIJ,WAAW,CAACH,IAAI,CAAE;IAChDkB,KAAK,EAAC,6EAAqD;IAC3DC,KAAK,EAAE;MAAEC,OAAO,EAAEb,UAAU,GAAG,GAAG,GAAG;IAAE,CAAE;IAAAc,QAAA,eAEzC3B,OAAA;MAAKsB,SAAS,EAAC,sBAAsB;MAAAK,QAAA,gBACjC3B,OAAA;QAAMsB,SAAS,EAAC,4CAA4C;QAACE,KAAK,EAAC,gBAAa;QAAAG,QAAA,EAAC;MAEjF;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACP/B,OAAA;QAAKsB,SAAS,EAAC,WAAW;QAAAK,QAAA,gBACtB3B,OAAA;UAAMsB,SAAS,EAAC,aAAa;UAAAK,QAAA,GAAAhB,YAAA,GACxBL,IAAI,CAAC0B,MAAM,cAAArB,YAAA,wBAAAC,iBAAA,GAAXD,YAAA,CAAasB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAK,aAAa,CAAC,cAAAvB,iBAAA,uBAA/CA,iBAAA,CAAiDwB;QAAK;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrD,CAAC,eACP/B,OAAA;UAAMsB,SAAS,EAAC,mBAAmB;UAAAK,QAAA,EAC9BrB,IAAI,CAAC+B;QAAI;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;;AAED;AAAArB,EAAA,CAzCML,QAAQ;EAAA,QACwBR,OAAO;AAAA;AAAAyC,EAAA,GADvCjC,QAAQ;AA0Cd,MAAMkC,YAAY,GAAGA,CAAC;EAAEhC,QAAQ;EAAEC,KAAK;EAAEgC,aAAa;EAAEC,MAAM,GAAG;AAAM,CAAC,KAAK;EAAAC,GAAA;EACzE,MAAM,CAAC;IAAEC,MAAM;IAAEC;EAAQ,CAAC,EAAEC,OAAO,CAAC,GAAG/C,OAAO,CAAC,OAAO;IAClDgD,MAAM,EAAE3C,SAAS,CAACC,IAAI;IACtB2C,IAAI,EAAG/B,IAAI,IAAK;MACZ,IAAIA,IAAI,CAACC,cAAc,KAAKV,QAAQ,EAAE;QAClC,IAAIyC,WAAW,GAAGxC,KAAK;QACvB,IAAIQ,IAAI,CAACE,WAAW,GAAGV,KAAK,EAAE;UAC1BwC,WAAW,GAAGxC,KAAK,GAAG,CAAC;QAC3B;QACA,IAAIQ,IAAI,CAACE,WAAW,KAAK8B,WAAW,IAAIA,WAAW,IAAI,CAAC,EAAE;UACtDR,aAAa,CAACjC,QAAQ,EAAES,IAAI,CAACE,WAAW,EAAE8B,WAAW,CAAC;QAC1D;MACJ;MACA,OAAO;QAAEC,UAAU,EAAE;MAAO,CAAC;IACjC,CAAC;IACDL,OAAO,EAAG5B,IAAI,IAAKA,IAAI,CAACC,cAAc,KAAKV,QAAQ;IACnDY,OAAO,EAAGC,OAAO,KAAM;MACnBuB,MAAM,EAAEvB,OAAO,CAACuB,MAAM,CAAC,CAAC;MACxBC,OAAO,EAAExB,OAAO,CAACwB,OAAO,CAAC;IAC7B,CAAC;EACL,CAAC,CAAC,EAAE,CAACrC,QAAQ,EAAEC,KAAK,EAAEgC,aAAa,CAAC,CAAC;EAErC,MAAMU,iBAAiB,GAAGP,MAAM,IAAIC,OAAO;EAC3C,MAAMO,2BAA2B,GAAGR,MAAM,IAAI,CAACC,OAAO;EAEtD,oBACI5C,OAAA;IACIqB,GAAG,EAAEwB,OAAQ;IACbvB,SAAS,EAAE,2BAA2B4B,iBAAiB,GAAG,WAAW,GAAG,EAAE,IAAIC,2BAA2B,GAAG,cAAc,GAAG,EAAE,IAAIV,MAAM,GAAG,OAAO,GAAG,EAAE,EAAG;IAAAd,QAAA,GAE1JuB,iBAAiB,IAAI,CAACT,MAAM,iBACzBzC,OAAA;MAAKsB,SAAS,EAAC,gBAAgB;MAAAK,QAAA,EAAC;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACvD,EACAmB,iBAAiB,IAAIT,MAAM,iBACxBzC,OAAA;MAAKsB,SAAS,EAAC,sBAAsB;MAAAK,QAAA,EAAC;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACjE,EACAoB,2BAA2B,iBACxBnD,OAAA;MAAKsB,SAAS,EAAC,wBAAwB;MAAAK,QAAA,EAAC;IAA8B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAC9E;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;;AAED;AAAAW,GAAA,CA3CMH,YAAY;EAAA,QACyBzC,OAAO;AAAA;AAAAsD,GAAA,GAD5Cb,YAAY;AA4ClB,MAAMc,aAAa,GAAGA,CAAC;EAAE9C;AAAS,CAAC,KAAK;EAAA+C,GAAA;EACpC,MAAM,CAAC;IAAEX,MAAM;IAAEC;EAAQ,CAAC,EAAEC,OAAO,CAAC,GAAG/C,OAAO,CAAC,OAAO;IAClDgD,MAAM,EAAE3C,SAAS,CAACC,IAAI;IACtBwC,OAAO,EAAG5B,IAAI,IAAKA,IAAI,CAACC,cAAc,KAAKV,QAAQ;IACnDY,OAAO,EAAGC,OAAO,KAAM;MACnBuB,MAAM,EAAEvB,OAAO,CAACuB,MAAM,CAAC,CAAC;MACxBC,OAAO,EAAExB,OAAO,CAACwB,OAAO,CAAC;IAC7B,CAAC;EACL,CAAC,CAAC,EAAE,CAACrC,QAAQ,CAAC,CAAC;EAEf,MAAM2C,iBAAiB,GAAGP,MAAM,IAAIC,OAAO;EAC3C,MAAMO,2BAA2B,GAAGR,MAAM,IAAI,CAACC,OAAO;EAEtD,oBACI5C,OAAA;IACIqB,GAAG,EAAEwB,OAAQ;IACbvB,SAAS,EAAE,4CAA4C4B,iBAAiB,GAAG,WAAW,GAAG,EAAE,IAAIC,2BAA2B,GAAG,cAAc,GAAG,EAAE,EAAG;IAAAxB,QAAA,GACtJ,sCACyB,EAACpB,QAAQ,EAAC,IAChC,EAAC2C,iBAAiB,iBACdlD,OAAA;MAAKsB,SAAS,EAAC,sBAAsB;MAAAK,QAAA,EAAC;IAAwB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACtE,EACAoB,2BAA2B,iBACxBnD,OAAA;MAAKsB,SAAS,EAAC,8BAA8B;MAAAK,QAAA,EAAC;IAAoC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAC1F;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;;AAED;AAAAuB,GAAA,CA7BMD,aAAa;EAAA,QACwBvD,OAAO;AAAA;AAAAyD,GAAA,GAD5CF,aAAa;AA8BnB,MAAMG,cAAc,GAAGA,CAAC;EAAEjD,QAAQ;EAAEkD,KAAK;EAAEC,MAAM;EAAEC,WAAW;EAAEC,gBAAgB;EAAEnD,WAAW;EAAE+B,aAAa;EAAEqB;AAAW,CAAC,KAAK;EAAAC,GAAA;EAC3H;EACA,MAAMC,aAAa,GAAGnE,OAAO,CAAC,MAAM;IAChC,IAAI,CAACiE,UAAU,EAAE,OAAOJ,KAAK;IAE7B,MAAMO,WAAW,GAAGH,UAAU,CAACI,WAAW,CAAC,CAAC;IAC5C,OAAOR,KAAK,CAACS,MAAM,CAAC5D,IAAI,IAAI;MAAA,IAAA6D,aAAA,EAAAC,kBAAA;MACxB,MAAMC,WAAW,GAAG,EAAAF,aAAA,GAAA7D,IAAI,CAAC0B,MAAM,cAAAmC,aAAA,wBAAAC,kBAAA,GAAXD,aAAA,CAAalC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAK,aAAa,CAAC,cAAAiC,kBAAA,uBAA/CA,kBAAA,CAAiDhC,KAAK,KAAI,EAAE;MAChF,OACI9B,IAAI,CAAC+B,IAAI,CAAC4B,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,WAAW,CAAC,IAC7CK,WAAW,CAACJ,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,WAAW,CAAC,IAC/CzD,QAAQ,CAAC0D,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,WAAW,CAAC;IAEpD,CAAC,CAAC;EACN,CAAC,EAAE,CAACP,KAAK,EAAEI,UAAU,EAAEtD,QAAQ,CAAC,CAAC;EAEjC,oBACIP,OAAA;IAAKsB,SAAS,EAAC,kBAAkB;IAAAK,QAAA,gBAC7B3B,OAAA;MACIsB,SAAS,EAAE,mBAAmBqC,WAAW,GAAG,YAAY,GAAG,EAAE,EAAG;MAChEpC,OAAO,EAAGgD,CAAC,IAAKX,gBAAgB,CAACrD,QAAQ,EAAEgE,CAAC,CAAE;MAAA5C,QAAA,gBAE9C3B,OAAA;QAAKsB,SAAS,EAAC,eAAe;QAAAK,QAAA,gBAC1B3B,OAAA;UAAMsB,SAAS,EAAC,iBAAiB;UAAAK,QAAA,EAC5B+B,MAAM,GAAG,GAAG,GAAG;QAAG;UAAA9B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eACP/B,OAAA;UAAMsB,SAAS,EAAC,eAAe;UAAAK,QAAA,EAAEpB;QAAQ;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,EAChD4B,WAAW,iBACR3D,OAAA;UAAMsB,SAAS,EAAC,YAAY;UAAAK,QAAA,GAAC,GAAC,EAACoC,aAAa,CAACS,MAAM,EAAC,GAAC;QAAA;UAAA5C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAC9D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eACN/B,OAAA;QAAMsB,SAAS,EAAC,eAAe;QAAAK,QAAA,EAAC;MAAC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvC,CAAC,EAEL2B,MAAM,iBACH1D,OAAA;MAAKsB,SAAS,EAAC,YAAY;MAAAK,QAAA,EACtBoC,aAAa,CAACS,MAAM,KAAK,CAAC,gBACvBxE,OAAA,CAACqD,aAAa;QAAC9C,QAAQ,EAAEA;MAAS;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAErC/B,OAAA,CAAAE,SAAA;QAAAyB,QAAA,GACKoC,aAAa,CAACU,GAAG,CAAC,CAACnE,IAAI,EAAEE,KAAK,kBAC3BR,OAAA;UAAqDsB,SAAS,EAAC,gBAAgB;UAAAK,QAAA,gBAC3E3B,OAAA,CAACuC,YAAY;YACThC,QAAQ,EAAEA,QAAS;YACnBC,KAAK,EAAEA,KAAM;YACbgC,aAAa,EAAEA;UAAc;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC,eACF/B,OAAA,CAACK,QAAQ;YACLC,IAAI,EAAEA,IAAK;YACXC,QAAQ,EAAEA,QAAS;YACnBC,KAAK,EAAEA,KAAM;YACbC,WAAW,EAAEA;UAAY;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC;QAAA,GAXI,gBAAgBzB,IAAI,CAACoE,OAAO,IAAIpE,IAAI,CAACqE,EAAE,EAAE;UAAA/C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAY9C,CACR,CAAC,eACF/B,OAAA,CAACuC,YAAY;UACThC,QAAQ,EAAEA,QAAS;UACnBC,KAAK,EAAEuD,aAAa,CAACS,MAAO;UAC5BhC,aAAa,EAAEA,aAAc;UAC7BC,MAAM,EAAE;QAAK;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChB,CAAC;MAAA,eACJ;IACL;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAC+B,GAAA,CAnEIN,cAAc;AAAAoB,GAAA,GAAdpB,cAAc;AAqEpB,MAAMqB,eAAe,GAAGA,CAAC;EACrBC,OAAO;EACPC,WAAW;EACXC,YAAY;EACZC,YAAY;EACZtB,WAAW;EACXuB,UAAU;EACVC,mBAAmB;EACnBC;AACJ,CAAC,KAAK;EAAAC,GAAA;EACF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAG5F,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxD,MAAM,CAACkE,UAAU,EAAE2B,aAAa,CAAC,GAAG7F,QAAQ,CAAC,EAAE,CAAC;;EAEhD;EACA,MAAM8F,cAAc,GAAG7F,OAAO,CAAC,MAAM;IACjC,MAAM8F,UAAU,GAAG,IAAIC,GAAG,CAAC,CAAC;IAE5BC,MAAM,CAACC,IAAI,CAACf,OAAO,CAAC,CAACgB,OAAO,CAACpB,OAAO,IAAI;MACpC,IAAIA,OAAO,KAAK,QAAQ,IAAIA,OAAO,KAAK,OAAO,EAAE;QAC7C,MAAMjB,KAAK,GAAGqB,OAAO,CAACJ,OAAO,CAAC,IAAI,EAAE;QACpCjB,KAAK,CAACqC,OAAO,CAACxF,IAAI,IAAI;UAClB,MAAMyF,YAAY,GAAGzF,IAAI,CAACC,QAAQ,IAAI,QAAQ;UAE9C,IAAI,CAACmF,UAAU,CAACM,GAAG,CAACD,YAAY,CAAC,EAAE;YAC/BL,UAAU,CAACO,GAAG,CAACF,YAAY,EAAE;cACzB1D,IAAI,EAAE0D,YAAY;cAClBtC,KAAK,EAAE;YACX,CAAC,CAAC;UACN;UAEAiC,UAAU,CAACQ,GAAG,CAACH,YAAY,CAAC,CAACtC,KAAK,CAAC0C,IAAI,CAAC;YACpC,GAAG7F,IAAI;YACPoE;UACJ,CAAC,CAAC;QACN,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;;IAEF;IACA,OAAO0B,KAAK,CAACC,IAAI,CAACX,UAAU,CAACY,MAAM,CAAC,CAAC,CAAC,CACjCC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACnE,IAAI,CAACqE,aAAa,CAACD,CAAC,CAACpE,IAAI,CAAC,CAAC;EACrD,CAAC,EAAE,CAACyC,OAAO,CAAC,CAAC;;EAEb;EACA,MAAM6B,kBAAkB,GAAG/G,OAAO,CAAC,MAAM;IACrC,IAAI,CAACiE,UAAU,EAAE,OAAO4B,cAAc;IAEtC,MAAMzB,WAAW,GAAGH,UAAU,CAACI,WAAW,CAAC,CAAC;IAE5C,OAAOwB,cAAc,CAACvB,MAAM,CAAC3D,QAAQ,IAAI;MACrC,MAAMqG,eAAe,GAAGrG,QAAQ,CAAC8B,IAAI,CAAC4B,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,WAAW,CAAC;MACzE,MAAM6C,gBAAgB,GAAGtG,QAAQ,CAACkD,KAAK,CAACqD,IAAI,CAACxG,IAAI,IAAI;QAAA,IAAAyG,aAAA,EAAAC,kBAAA;QACjD,MAAM3C,WAAW,GAAG,EAAA0C,aAAA,GAAAzG,IAAI,CAAC0B,MAAM,cAAA+E,aAAA,wBAAAC,kBAAA,GAAXD,aAAA,CAAa9E,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAK,aAAa,CAAC,cAAA6E,kBAAA,uBAA/CA,kBAAA,CAAiD5E,KAAK,KAAI,EAAE;QAChF,OACI9B,IAAI,CAAC+B,IAAI,CAAC4B,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,WAAW,CAAC,IAC7CK,WAAW,CAACJ,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,WAAW,CAAC;MAEvD,CAAC,CAAC;MAEF,OAAO4C,eAAe,IAAIC,gBAAgB;IAC9C,CAAC,CAAC;EACN,CAAC,EAAE,CAACpB,cAAc,EAAE5B,UAAU,CAAC,CAAC;EAEhC,MAAMoD,oBAAoB,GAAGA,CAAClB,YAAY,EAAEmB,KAAK,KAAK;IAClDA,KAAK,CAACC,eAAe,CAAC,CAAC;IACvB5B,iBAAiB,CAAC6B,IAAI,KAAK;MACvB,GAAGA,IAAI;MACP,CAACrB,YAAY,GAAG,CAACqB,IAAI,CAACrB,YAAY;IACtC,CAAC,CAAC,CAAC;EACP,CAAC;EAED,MAAMsB,eAAe,GAAI/G,IAAI,IAAK;IAC9ByE,WAAW,CAACzE,IAAI,CAACoE,OAAO,CAAC;IACzBM,YAAY,CAAC1E,IAAI,CAAC;EACtB,CAAC;EAED,MAAMgH,iBAAiB,GAAGA,CAAA,KAAM;IAC5B,OAAOX,kBAAkB,CAACY,MAAM,CAAC,CAACC,KAAK,EAAEjH,QAAQ,KAAKiH,KAAK,GAAGjH,QAAQ,CAACkD,KAAK,CAACe,MAAM,EAAE,CAAC,CAAC;EAC3F,CAAC;EAED,oBACIxE,OAAA;IAAKsB,SAAS,EAAC,qBAAqB;IAAAK,QAAA,gBAChC3B,OAAA;MAAKsB,SAAS,EAAC,kBAAkB;MAAAK,QAAA,eAC7B3B,OAAA;QAAIsB,SAAS,EAAC,iBAAiB;QAAAK,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C,CAAC,eAEN/B,OAAA;MAAGsB,SAAS,EAAC,iBAAiB;MAAAK,QAAA,EAAC;IAE/B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAEH4B,WAAW,iBACR3D,OAAA;MAAKsB,SAAS,EAAC,yBAAyB;MAAAK,QAAA,eACpC3B,OAAA;QAAKsB,SAAS,EAAC,cAAc;QAAAK,QAAA,gBACzB3B,OAAA;UAAGsB,SAAS,EAAC,mBAAmB;UAAAK,QAAA,EAAC;QAAkC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACvE/B,OAAA;UAAQsB,SAAS,EAAC,kBAAkB;UAACC,OAAO,EAAE0D,YAAa;UAAAtD,QAAA,EAAC;QAE5D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR,eAED/B,OAAA;MAAKsB,SAAS,EAAC,kBAAkB;MAAAK,QAAA,gBAC7B3B,OAAA;QAAIsB,SAAS,EAAC,gBAAgB;QAAAK,QAAA,EAAC;MAAyB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAE7D/B,OAAA;QAAKsB,SAAS,EAAC,kBAAkB;QAAAK,QAAA,gBAC7B3B,OAAA;UAAKsB,SAAS,EAAC,YAAY;UAAAK,QAAA,gBACvB3B,OAAA;YAAMsB,SAAS,EAAC,aAAa;YAAAK,QAAA,EAAC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACvC/B,OAAA;YACIe,IAAI,EAAC,MAAM;YACX0G,WAAW,EAAC,uDAA8C;YAC1DrF,KAAK,EAAEyB,UAAW;YAClB6D,QAAQ,EAAGnD,CAAC,IAAKiB,aAAa,CAACjB,CAAC,CAACoD,MAAM,CAACvF,KAAK,CAAE;YAC/Cd,SAAS,EAAC;UAAc;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,EACD8B,UAAU,iBACP7D,OAAA;YACIsB,SAAS,EAAC,cAAc;YACxBC,OAAO,EAAEA,CAAA,KAAMiE,aAAa,CAAC,EAAE,CAAE;YACjChE,KAAK,EAAC,sBAAsB;YAAAG,QAAA,EAC/B;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CACX;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACN/B,OAAA;UAAKsB,SAAS,EAAC,cAAc;UAAAK,QAAA,eACzB3B,OAAA;YAAMsB,SAAS,EAAC,aAAa;YAAAK,QAAA,EAAC;UAAoC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxE,CAAC,EACL8B,UAAU,iBACP7D,OAAA;UAAKsB,SAAS,EAAC,qBAAqB;UAAAK,QAAA,EAC/BgF,kBAAkB,CAACnC,MAAM,KAAK,CAAC,GAC1B,wBAAwBX,UAAU,GAAG,GACrC,GAAGyD,iBAAiB,CAAC,CAAC,6BAA6BX,kBAAkB,CAACnC,MAAM;QAAe;UAAA5C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEhG,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAEN/B,OAAA;QAAKsB,SAAS,EAAC,sBAAsB;QAAAK,QAAA,gBACjC3B,OAAA;UAAKsB,SAAS,EAAC,cAAc;UAAAK,QAAA,eACzB3B,OAAA;YAAMsB,SAAS,EAAC,aAAa;YAAAK,QAAA,EAAC;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,EAEL4E,kBAAkB,CAAClC,GAAG,CAAClE,QAAQ;UAAA,IAAAqH,qBAAA;UAAA,oBAC5B5H,OAAA,CAACwD,cAAc;YAEXjD,QAAQ,EAAEA,QAAQ,CAAC8B,IAAK;YACxBoB,KAAK,EAAElD,QAAQ,CAACkD,KAAM;YACtBC,MAAM,GAAAkE,qBAAA,GAAEtC,cAAc,CAAC/E,QAAQ,CAAC8B,IAAI,CAAC,cAAAuF,qBAAA,cAAAA,qBAAA,GAAI,IAAK;YAC9CjE,WAAW,EAAEA,WAAY;YACzBC,gBAAgB,EAAEqD,oBAAqB;YACvCxG,WAAW,EAAE4G,eAAgB;YAC7B7E,aAAa,EAAE4C,wBAAyB;YACxCvB,UAAU,EAAEA;UAAW,GARlBtD,QAAQ,CAAC8B,IAAI;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OASrB,CAAC;QAAA,CACL,CAAC,EAED4E,kBAAkB,CAACnC,MAAM,KAAK,CAAC,iBAC5BxE,OAAA;UAAKsB,SAAS,EAAC,YAAY;UAAAK,QAAA,eACvB3B,OAAA;YAAA2B,QAAA,EAAG;UAAiD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvD,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACsD,GAAA,CArKIR,eAAe;AAAAgD,GAAA,GAAfhD,eAAe;AAuKrB,eAAeA,eAAe;AAAC,IAAAvC,EAAA,EAAAc,GAAA,EAAAG,GAAA,EAAAqB,GAAA,EAAAiD,GAAA;AAAAC,YAAA,CAAAxF,EAAA;AAAAwF,YAAA,CAAA1E,GAAA;AAAA0E,YAAA,CAAAvE,GAAA;AAAAuE,YAAA,CAAAlD,GAAA;AAAAkD,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}