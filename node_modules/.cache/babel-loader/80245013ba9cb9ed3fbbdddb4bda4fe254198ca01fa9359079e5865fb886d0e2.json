{"ast":null,"code":"var _jsxFileName = \"D:\\\\CODE\\\\covalen-app\\\\src\\\\components\\\\DashboardMaison.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useMemo } from 'react';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, verticalListSortingStrategy, useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\n// Composant Task draggable avec dnd-kit\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SortableTaskItem = ({\n  task,\n  onTaskClick\n}) => {\n  _s();\n  var _task$fields, _task$fields$find;\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({\n    id: task.id\n  });\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.6 : 1\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef,\n    style: style,\n    className: `task-item clickable compact grid-task ${isDragging ? 'dragging' : ''}`,\n    onClick: () => onTaskClick(task),\n    title: \"Glissez pour r\\xE9organiser\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-content-compact\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"drag-handle enhanced-handle compact-handle\",\n        title: \"R\\xE9organiser\",\n        ...attributes,\n        ...listeners,\n        children: \"\\u22EE\\u22EE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-number\",\n          children: (_task$fields = task.fields) === null || _task$fields === void 0 ? void 0 : (_task$fields$find = _task$fields.find(f => f.key === 'modelNumber')) === null || _task$fields$find === void 0 ? void 0 : _task$fields$find.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-name-compact\",\n          children: task.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n\n// Composant Task simple (sans drag & drop pour comparaison)\n_s(SortableTaskItem, \"bHcBvfvWWXIh6rUHlnQDLt/lZWI=\", false, function () {\n  return [useSortable];\n});\n_c = SortableTaskItem;\nconst TaskItem = ({\n  task,\n  onTaskClick\n}) => {\n  var _task$fields2, _task$fields2$find;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"task-item clickable compact grid-task\",\n    onClick: () => onTaskClick(task),\n    title: \"Cliquez pour voir les d\\xE9tails\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-content-compact\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-number\",\n          children: (_task$fields2 = task.fields) === null || _task$fields2 === void 0 ? void 0 : (_task$fields2$find = _task$fields2.find(f => f.key === 'modelNumber')) === null || _task$fields2$find === void 0 ? void 0 : _task$fields2$find.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-name-compact\",\n          children: task.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n\n// Composant de grille libre pour une catégorie\n_c2 = TaskItem;\nconst CategoryFreeGrid = ({\n  category,\n  tasks,\n  isOpen,\n  isAdminMode,\n  onToggleCategory,\n  onTaskClick,\n  onReorderTasks,\n  searchTerm,\n  gridColumns = 1\n}) => {\n  _s2();\n  // Filtrer les tâches localement\n  const filteredTasks = useMemo(() => {\n    if (!searchTerm) return tasks;\n    const searchLower = searchTerm.toLowerCase();\n    return tasks.filter(task => {\n      var _task$fields3, _task$fields3$find;\n      const modelNumber = ((_task$fields3 = task.fields) === null || _task$fields3 === void 0 ? void 0 : (_task$fields3$find = _task$fields3.find(f => f.key === 'modelNumber')) === null || _task$fields3$find === void 0 ? void 0 : _task$fields3$find.value) || '';\n      return task.name.toLowerCase().includes(searchLower) || modelNumber.toLowerCase().includes(searchLower) || category.toLowerCase().includes(searchLower);\n    });\n  }, [tasks, searchTerm, category]);\n\n  // Configuration des sensors pour dnd-kit\n  const sensors = useSensors(useSensor(PointerSensor), useSensor(KeyboardSensor, {\n    coordinateGetter: sortableKeyboardCoordinates\n  }));\n\n  // Gestion du drag end\n  const handleDragEnd = event => {\n    const {\n      active,\n      over\n    } = event;\n    if (active.id !== (over === null || over === void 0 ? void 0 : over.id)) {\n      const oldIndex = filteredTasks.findIndex(task => task.id === active.id);\n      const newIndex = filteredTasks.findIndex(task => task.id === over.id);\n      if (oldIndex !== -1 && newIndex !== -1) {\n        const reorderedTasks = arrayMove(filteredTasks, oldIndex, newIndex);\n        onReorderTasks(category, reorderedTasks);\n      }\n    }\n  };\n\n  // Créer une grille simple\n  const createGrid = useMemo(() => {\n    // Calculer le nombre de lignes nécessaires\n    const taskCount = filteredTasks.length;\n    const rows = Math.ceil(taskCount / gridColumns);\n    const totalCells = rows * gridColumns;\n\n    // Créer un array pour la grille\n    const grid = Array(totalCells).fill(null);\n\n    // Placer les tâches dans la grille séquentiellement\n    filteredTasks.forEach((task, index) => {\n      if (index < totalCells) {\n        grid[index] = task;\n      }\n    });\n    return {\n      grid,\n      rows,\n      totalCells\n    };\n  }, [filteredTasks, gridColumns]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: `category-header ${isAdminMode ? 'admin-mode' : ''}`,\n      onClick: e => onToggleCategory(category, e),\n      \"aria-expanded\": isOpen,\n      \"aria-label\": `Toggle ${category} category`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"category-toggle\",\n          children: isOpen ? '▼' : '▶'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"category-name\",\n          children: category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), isAdminMode && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"task-count\",\n          children: [\"(\", filteredTasks.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"category-goto\",\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(DndContext, {\n      sensors: sensors,\n      collisionDetection: closestCenter,\n      onDragEnd: handleDragEnd,\n      children: /*#__PURE__*/_jsxDEV(SortableContext, {\n        items: filteredTasks.map(task => task.id),\n        strategy: verticalListSortingStrategy,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tasks-free-grid\",\n          style: {\n            display: 'grid',\n            gridTemplateColumns: `repeat(${gridColumns}, 1fr)`,\n            gap: '8px',\n            padding: '16px'\n          },\n          children: createGrid.grid.map((task, gridPosition) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid-cell\",\n            children: task ? /*#__PURE__*/_jsxDEV(SortableTaskItem, {\n              task: task,\n              onTaskClick: onTaskClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-grid-cell\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 41\n            }, this)\n          }, `grid-cell-${gridPosition}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 9\n  }, this);\n};\n_s2(CategoryFreeGrid, \"1N7k+PK64E8FmJQ8gW4g/mt/VCU=\", false, function () {\n  return [useSensors, useSensor, useSensor];\n});\n_c3 = CategoryFreeGrid;\nconst DashboardMaison = ({\n  appData,\n  onTabChange,\n  onTaskSelect,\n  onAdminPanel,\n  isAdminMode,\n  onReorderTasksInCategory\n}) => {\n  _s3();\n  const [categoryStates, setCategoryStates] = useState({});\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Données organisées par catégorie\n  const categoriesData = useMemo(() => {\n    const categories = new Map();\n    Object.keys(appData).forEach(tabName => {\n      if (tabName !== 'Maison' && tabName !== 'Admin') {\n        const tasks = appData[tabName] || [];\n        tasks.forEach(task => {\n          const categoryName = task.category || 'Autres';\n          if (!categories.has(categoryName)) {\n            categories.set(categoryName, {\n              name: categoryName,\n              tasks: []\n            });\n          }\n          categories.get(categoryName).tasks.push({\n            ...task,\n            tabName\n          });\n        });\n      }\n    });\n    return Array.from(categories.values()).sort((a, b) => a.name.localeCompare(b.name));\n  }, [appData]);\n\n  // Filtrage des catégories\n  const filteredCategories = useMemo(() => {\n    if (!searchTerm) return categoriesData;\n    const searchLower = searchTerm.toLowerCase();\n    return categoriesData.filter(category => {\n      const categoryMatches = category.name.toLowerCase().includes(searchLower);\n      const hasMatchingTasks = category.tasks.some(task => {\n        var _task$fields4, _task$fields4$find;\n        const modelNumber = ((_task$fields4 = task.fields) === null || _task$fields4 === void 0 ? void 0 : (_task$fields4$find = _task$fields4.find(f => f.key === 'modelNumber')) === null || _task$fields4$find === void 0 ? void 0 : _task$fields4$find.value) || '';\n        return task.name.toLowerCase().includes(searchLower) || modelNumber.toLowerCase().includes(searchLower);\n      });\n      return categoryMatches || hasMatchingTasks;\n    });\n  }, [categoriesData, searchTerm]);\n  const handleToggleCategory = (categoryName, event) => {\n    event.stopPropagation();\n    setCategoryStates(prev => ({\n      ...prev,\n      [categoryName]: !prev[categoryName]\n    }));\n  };\n  const handleTaskClick = task => {\n    onTabChange(task.tabName);\n    onTaskSelect(task);\n  };\n  const handleReorderTasks = (categoryName, reorderedTasks) => {\n    if (onReorderTasksInCategory) {\n      var _categoriesData$find;\n      // Trouver les indices des tâches dans le tableau d'origine\n      const originalTasks = ((_categoriesData$find = categoriesData.find(cat => cat.name === categoryName)) === null || _categoriesData$find === void 0 ? void 0 : _categoriesData$find.tasks) || [];\n      const sourceIndex = originalTasks.findIndex(task => task.id === reorderedTasks[0].id);\n      const targetIndex = reorderedTasks.findIndex(task => task.id === originalTasks[sourceIndex].id);\n      onReorderTasksInCategory(categoryName, sourceIndex, targetIndex);\n    }\n  };\n  const getTotalTaskCount = () => {\n    return filteredCategories.reduce((total, category) => total + category.tasks.length, 0);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"dashboard-title\",\n        children: \"Covalen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"welcome-message\",\n      children: \"Bienvenue sur votre tableau de bord centralis\\xE9.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }, this), isAdminMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-dashboard-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-banner\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"admin-banner-text\",\n          children: \"Mode Admin Actif sur le Dashboard.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-manage-btn\",\n          onClick: onAdminPanel,\n          children: \"G\\xE9rer les Onglets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overview-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"overview-title\",\n        children: \"Vue d'overview des T\\xE2ches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"search-icon\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Rechercher une t\\xE2che, cat\\xE9gorie ou num\\xE9ro...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"search-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 25\n          }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"search-clear\",\n            onClick: () => setSearchTerm(''),\n            title: \"Effacer la recherche\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-hints\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"search-hint\",\n            children: \"\\uD83D\\uDCA1 Affichage en grille simple\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }, this), searchTerm && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-results-info\",\n          children: filteredCategories.length === 0 ? `Aucun résultat pour \"${searchTerm}\"` : `${getTotalTaskCount()} tâche(s) trouvée(s) dans ${filteredCategories.length} catégorie(s)`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"categories-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tasks-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tasks-label\",\n            children: \"T\\xE2ches (Grille Simple)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 21\n        }, this), filteredCategories.map(category => {\n          var _categoryStates$categ;\n          return /*#__PURE__*/_jsxDEV(CategoryFreeGrid, {\n            category: category.name,\n            tasks: category.tasks,\n            isOpen: (_categoryStates$categ = categoryStates[category.name]) !== null && _categoryStates$categ !== void 0 ? _categoryStates$categ : true,\n            isAdminMode: isAdminMode,\n            onToggleCategory: handleToggleCategory,\n            onTaskClick: handleTaskClick,\n            onReorderTasks: handleReorderTasks,\n            searchTerm: searchTerm,\n            gridColumns: 4\n          }, category.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 25\n          }, this);\n        }), filteredCategories.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-results\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Aucune cat\\xE9gorie ne correspond \\xE0 votre recherche.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 9\n  }, this);\n};\n_s3(DashboardMaison, \"2z/e+O9wO2YGMvboOthtWP65jlQ=\");\n_c4 = DashboardMaison;\nexport default DashboardMaison;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"SortableTaskItem\");\n$RefreshReg$(_c2, \"TaskItem\");\n$RefreshReg$(_c3, \"CategoryFreeGrid\");\n$RefreshReg$(_c4, \"DashboardMaison\");","map":{"version":3,"names":["React","useState","useMemo","DndContext","closestCenter","KeyboardSensor","PointerSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","verticalListSortingStrategy","useSortable","CSS","jsxDEV","_jsxDEV","SortableTaskItem","task","onTaskClick","_s","_task$fields","_task$fields$find","attributes","listeners","setNodeRef","transform","transition","isDragging","id","style","Transform","toString","opacity","ref","className","onClick","title","children","fileName","_jsxFileName","lineNumber","columnNumber","fields","find","f","key","value","name","_c","TaskItem","_task$fields2","_task$fields2$find","_c2","CategoryFreeGrid","category","tasks","isOpen","isAdminMode","onToggleCategory","onReorderTasks","searchTerm","gridColumns","_s2","filteredTasks","searchLower","toLowerCase","filter","_task$fields3","_task$fields3$find","modelNumber","includes","sensors","coordinateGetter","handleDragEnd","event","active","over","oldIndex","findIndex","newIndex","reorderedTasks","createGrid","taskCount","length","rows","Math","ceil","totalCells","grid","Array","fill","forEach","index","e","collisionDetection","onDragEnd","items","map","strategy","display","gridTemplateColumns","gap","padding","gridPosition","_c3","DashboardMaison","appData","onTabChange","onTaskSelect","onAdminPanel","onReorderTasksInCategory","_s3","categoryStates","setCategoryStates","setSearchTerm","categoriesData","categories","Map","Object","keys","tabName","categoryName","has","set","get","push","from","values","sort","a","b","localeCompare","filteredCategories","categoryMatches","hasMatchingTasks","some","_task$fields4","_task$fields4$find","handleToggleCategory","stopPropagation","prev","handleTaskClick","handleReorderTasks","_categoriesData$find","originalTasks","cat","sourceIndex","targetIndex","getTotalTaskCount","reduce","total","type","placeholder","onChange","target","_categoryStates$categ","_c4","$RefreshReg$"],"sources":["D:/CODE/covalen-app/src/components/DashboardMaison.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport {\n    DndContext,\n    closestCenter,\n    KeyboardSensor,\n    PointerSensor,\n    useSensor,\n    useSensors,\n} from '@dnd-kit/core';\nimport {\n    arrayMove,\n    SortableContext,\n    sortableKeyboardCoordinates,\n    verticalListSortingStrategy,\n    useSortable,\n} from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\n// Composant Task draggable avec dnd-kit\nconst SortableTaskItem = ({ task, onTaskClick }) => {\n    const {\n        attributes,\n        listeners,\n        setNodeRef,\n        transform,\n        transition,\n        isDragging,\n    } = useSortable({ id: task.id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.6 : 1,\n    };\n\n    return (\n        <div\n            ref={setNodeRef}\n            style={style}\n            className={`task-item clickable compact grid-task ${isDragging ? 'dragging' : ''}`}\n            onClick={() => onTaskClick(task)}\n            title=\"Glissez pour réorganiser\"\n        >\n            <div className=\"task-content-compact\">\n                <span\n                    className=\"drag-handle enhanced-handle compact-handle\"\n                    title=\"Réorganiser\"\n                    {...attributes}\n                    {...listeners}\n                >\n                    ⋮⋮\n                </span>\n                <div className=\"task-info\">\n                    <span className=\"task-number\">\n                        {task.fields?.find(f => f.key === 'modelNumber')?.value}\n                    </span>\n                    <span className=\"task-name-compact\">\n                        {task.name}\n                    </span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Composant Task simple (sans drag & drop pour comparaison)\nconst TaskItem = ({ task, onTaskClick }) => {\n    return (\n        <div\n            className=\"task-item clickable compact grid-task\"\n            onClick={() => onTaskClick(task)}\n            title=\"Cliquez pour voir les détails\"\n        >\n            <div className=\"task-content-compact\">\n                <div className=\"task-info\">\n                    <span className=\"task-number\">\n                        {task.fields?.find(f => f.key === 'modelNumber')?.value}\n                    </span>\n                    <span className=\"task-name-compact\">\n                        {task.name}\n                    </span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Composant de grille libre pour une catégorie\nconst CategoryFreeGrid = ({\n    category,\n    tasks,\n    isOpen,\n    isAdminMode,\n    onToggleCategory,\n    onTaskClick,\n    onReorderTasks,\n    searchTerm,\n    gridColumns = 1\n}) => {\n    // Filtrer les tâches localement\n    const filteredTasks = useMemo(() => {\n        if (!searchTerm) return tasks;\n\n        const searchLower = searchTerm.toLowerCase();\n        return tasks.filter(task => {\n            const modelNumber = task.fields?.find(f => f.key === 'modelNumber')?.value || '';\n            return (\n                task.name.toLowerCase().includes(searchLower) ||\n                modelNumber.toLowerCase().includes(searchLower) ||\n                category.toLowerCase().includes(searchLower)\n            );\n        });\n    }, [tasks, searchTerm, category]);\n\n    // Configuration des sensors pour dnd-kit\n    const sensors = useSensors(\n        useSensor(PointerSensor),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    // Gestion du drag end\n    const handleDragEnd = (event) => {\n        const { active, over } = event;\n\n        if (active.id !== over?.id) {\n            const oldIndex = filteredTasks.findIndex(task => task.id === active.id);\n            const newIndex = filteredTasks.findIndex(task => task.id === over.id);\n\n            if (oldIndex !== -1 && newIndex !== -1) {\n                const reorderedTasks = arrayMove(filteredTasks, oldIndex, newIndex);\n                onReorderTasks(category, reorderedTasks);\n            }\n        }\n    };\n\n    // Créer une grille simple\n    const createGrid = useMemo(() => {\n        // Calculer le nombre de lignes nécessaires\n        const taskCount = filteredTasks.length;\n        const rows = Math.ceil(taskCount / gridColumns);\n        const totalCells = rows * gridColumns;\n\n        // Créer un array pour la grille\n        const grid = Array(totalCells).fill(null);\n\n        // Placer les tâches dans la grille séquentiellement\n        filteredTasks.forEach((task, index) => {\n            if (index < totalCells) {\n                grid[index] = task;\n            }\n        });\n\n        return { grid, rows, totalCells };\n    }, [filteredTasks, gridColumns]);\n\n    return (\n        <div className=\"category-section\">\n            <button\n                className={`category-header ${isAdminMode ? 'admin-mode' : ''}`}\n                onClick={(e) => onToggleCategory(category, e)}\n                aria-expanded={isOpen}\n                aria-label={`Toggle ${category} category`}\n            >\n                <div className=\"category-left\">\n                    <span className=\"category-toggle\">\n                        {isOpen ? '▼' : '▶'}\n                    </span>\n                    <span className=\"category-name\">{category}</span>\n                    {isAdminMode && (\n                        <span className=\"task-count\">({filteredTasks.length})</span>\n                    )}\n                </div>\n                <span className=\"category-goto\">→</span>\n            </button>\n\n            {isOpen && (\n                <DndContext\n                    sensors={sensors}\n                    collisionDetection={closestCenter}\n                    onDragEnd={handleDragEnd}\n                >\n                    <SortableContext\n                        items={filteredTasks.map(task => task.id)}\n                        strategy={verticalListSortingStrategy}\n                    >\n                        <div\n                            className=\"tasks-free-grid\"\n                            style={{\n                                display: 'grid',\n                                gridTemplateColumns: `repeat(${gridColumns}, 1fr)`,\n                                gap: '8px',\n                                padding: '16px'\n                            }}\n                        >\n                            {createGrid.grid.map((task, gridPosition) => (\n                                <div key={`grid-cell-${gridPosition}`} className=\"grid-cell\">\n                                    {task ? (\n                                        <SortableTaskItem\n                                            task={task}\n                                            onTaskClick={onTaskClick}\n                                        />\n                                    ) : (\n                                        <div className=\"empty-grid-cell\">\n                                            {/* Cellule vide */}\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    </SortableContext>\n                </DndContext>\n            )}\n        </div>\n    );\n};\n\nconst DashboardMaison = ({\n    appData,\n    onTabChange,\n    onTaskSelect,\n    onAdminPanel,\n    isAdminMode,\n    onReorderTasksInCategory\n}) => {\n    const [categoryStates, setCategoryStates] = useState({});\n    const [searchTerm, setSearchTerm] = useState('');\n\n    // Données organisées par catégorie\n    const categoriesData = useMemo(() => {\n        const categories = new Map();\n\n        Object.keys(appData).forEach(tabName => {\n            if (tabName !== 'Maison' && tabName !== 'Admin') {\n                const tasks = appData[tabName] || [];\n                tasks.forEach(task => {\n                    const categoryName = task.category || 'Autres';\n\n                    if (!categories.has(categoryName)) {\n                        categories.set(categoryName, {\n                            name: categoryName,\n                            tasks: []\n                        });\n                    }\n\n                    categories.get(categoryName).tasks.push({\n                        ...task,\n                        tabName\n                    });\n                });\n            }\n        });\n\n        return Array.from(categories.values())\n            .sort((a, b) => a.name.localeCompare(b.name));\n    }, [appData]);\n\n    // Filtrage des catégories\n    const filteredCategories = useMemo(() => {\n        if (!searchTerm) return categoriesData;\n\n        const searchLower = searchTerm.toLowerCase();\n\n        return categoriesData.filter(category => {\n            const categoryMatches = category.name.toLowerCase().includes(searchLower);\n            const hasMatchingTasks = category.tasks.some(task => {\n                const modelNumber = task.fields?.find(f => f.key === 'modelNumber')?.value || '';\n                return (\n                    task.name.toLowerCase().includes(searchLower) ||\n                    modelNumber.toLowerCase().includes(searchLower)\n                );\n            });\n\n            return categoryMatches || hasMatchingTasks;\n        });\n    }, [categoriesData, searchTerm]);\n\n    const handleToggleCategory = (categoryName, event) => {\n        event.stopPropagation();\n        setCategoryStates(prev => ({\n            ...prev,\n            [categoryName]: !prev[categoryName]\n        }));\n    };\n\n    const handleTaskClick = (task) => {\n        onTabChange(task.tabName);\n        onTaskSelect(task);\n    };\n\n    const handleReorderTasks = (categoryName, reorderedTasks) => {\n        if (onReorderTasksInCategory) {\n            // Trouver les indices des tâches dans le tableau d'origine\n            const originalTasks = categoriesData.find(cat => cat.name === categoryName)?.tasks || [];\n            const sourceIndex = originalTasks.findIndex(task => task.id === reorderedTasks[0].id);\n            const targetIndex = reorderedTasks.findIndex(task => task.id === originalTasks[sourceIndex].id);\n\n            onReorderTasksInCategory(categoryName, sourceIndex, targetIndex);\n        }\n    };\n\n    const getTotalTaskCount = () => {\n        return filteredCategories.reduce((total, category) => total + category.tasks.length, 0);\n    };\n\n    return (\n        <div className=\"dashboard-container\">\n            <div className=\"dashboard-header\">\n                <h1 className=\"dashboard-title\">Covalen</h1>\n            </div>\n\n            <p className=\"welcome-message\">\n                Bienvenue sur votre tableau de bord centralisé.\n            </p>\n\n            {isAdminMode && (\n                <div className=\"admin-dashboard-section\">\n                    <div className=\"admin-banner\">\n                        <p className=\"admin-banner-text\">Mode Admin Actif sur le Dashboard.</p>\n                        <button className=\"admin-manage-btn\" onClick={onAdminPanel}>\n                            Gérer les Onglets\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            <div className=\"overview-section\">\n                <h2 className=\"overview-title\">Vue d'overview des Tâches</h2>\n\n                <div className=\"search-container\">\n                    <div className=\"search-bar\">\n                        <span className=\"search-icon\">🔍</span>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Rechercher une tâche, catégorie ou numéro...\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"search-input\"\n                        />\n                        {searchTerm && (\n                            <button\n                                className=\"search-clear\"\n                                onClick={() => setSearchTerm('')}\n                                title=\"Effacer la recherche\"\n                            >\n                                ✕\n                            </button>\n                        )}\n                    </div>\n                    <div className=\"search-hints\">\n                        <span className=\"search-hint\">💡 Affichage en grille simple</span>\n                    </div>\n                    {searchTerm && (\n                        <div className=\"search-results-info\">\n                            {filteredCategories.length === 0\n                                ? `Aucun résultat pour \"${searchTerm}\"`\n                                : `${getTotalTaskCount()} tâche(s) trouvée(s) dans ${filteredCategories.length} catégorie(s)`\n                            }\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"categories-container\">\n                    <div className=\"tasks-header\">\n                        <span className=\"tasks-label\">Tâches (Grille Simple)</span>\n                    </div>\n\n                    {filteredCategories.map(category => (\n                        <CategoryFreeGrid\n                            key={category.name}\n                            category={category.name}\n                            tasks={category.tasks}\n                            isOpen={categoryStates[category.name] ?? true}\n                            isAdminMode={isAdminMode}\n                            onToggleCategory={handleToggleCategory}\n                            onTaskClick={handleTaskClick}\n                            onReorderTasks={handleReorderTasks}\n                            searchTerm={searchTerm}\n                            gridColumns={4}\n                        />\n                    ))}\n\n                    {filteredCategories.length === 0 && (\n                        <div className=\"no-results\">\n                            <p>Aucune catégorie ne correspond à votre recherche.</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default DashboardMaison;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}